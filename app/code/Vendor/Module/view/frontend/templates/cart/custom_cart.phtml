<section class="shipping_cart-section">
    <div class="container cart-container">
        <div class="row g-4">

            <!-- Left Side -->
            <div class="col-lg-8">
                <div class="cart-box">
                    <div class="cart-title">
                        <img class="cart_icon" src="<?= $block->getViewFileUrl('images/cart/shipping cart vector.png'); ?>" alt="">
                        Shopping Cart (<?= count($block->getItems()) ?> items)
                    </div>

                    <?php foreach ($block->getItems() as $item): ?>
                        <div class="cart-item">
                            <img src="<?= $block->getProductImage($item) ?>" alt="<?= $item->getName() ?>">
                            <div class="item-details">
                                <div class="item-title"><?= $item->getName() ?></div>
                                <div class="quantity-box">
                                    <form method="post" action="<?= $block->getUpdateUrl() ?>">
                                        <?= $block->getBlockHtml('formkey') ?>
                                        <div class="quantity-box">
                                            <button class="quantity-btn" disabled="">-</button>
                                            <input type="text" name="cart[<?= $item->getId() ?>][qty]" value="<?= $item->getQty() ?>" class="quantity-number">
                                            <button class="quantity-btn">+</button>
                                        </div>
                                        <button type="submit" class="quantity-btn">Update</button>
                                    </form>
                                </div>
                            </div>
                            <div class="item-price">
                                <div class="price"><?= $block->getFormattedPrice($item->getRowTotal()) ?></div>
                                <a href="<?= $block->getRemoveUrl($item) ?>" class="remove-btn">
                                    <i class="fa-solid fa-trash-can"></i> Remove
                                </a>
                            </div>
                        </div>
                    <?php endforeach; ?>
                </div>

                <div class="special-box">
                    <label class="special-label"><i class="fa-regular fa-message"></i> Special Instructions</label>
                    <textarea placeholder="Any special requests, gift messages, or packaging instructions..."></textarea>
                </div>
            </div>

            <!-- Right Side -->
            <div class="col-lg-4">
                <div class="promo-box">
                    <label class="promo_label">
                        <img class="promo-img" src="<?= $block->getViewFileUrl('images/cart/promo tag.png') ?>" alt="">
                        Promo Code
                    </label>

                    <div class="input_group">
                        <input type="text" class="form-control" placeholder="Enter your promo code" 
                            value="<?= $block->getQuote()->getCouponCode() ?>">
                        <button class="apply-btn">
                            <?= $block->getQuote()->getCouponCode() ? 'Update' : 'Apply' ?>
                        </button>
                    </div>

                    <!-- Show remove promo link if coupon applied -->
                    <?php if ($block->getQuote()->getCouponCode()): ?>
                        <a href="#" class="remove-promo" style="display:inline-block;margin-top:5px;font-size:13px;color:#007bff;">
                            Remove Promo
                        </a>
                    <?php endif; ?>

                    <!-- Inline message container (filled dynamically by JS) -->
                    <div class="promo-msg" style="margin-top:8px;font-size:14px;color:#333;">
                        <?php if ($block->getQuote()->getCouponCode()): ?>
                            <?= __('Promo code "%1" applied', $block->getQuote()->getCouponCode()) ?>
                        <?php endif; ?>
                    </div>

                    <small class="promo-try text-muted d-block">Try: FIRST20</small>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Order Summary</div>
                    <div class="summary-row"><span>Subtotal</span><span><?= $block->getSubtotal() ?></span></div>
                    <div class="summary-total d-flex justify-content-between">
                        <span>TOTAL</span><span><?= $block->getGrandTotal() ?></span>
                    </div>
                    <a href="<?= $block->getUrl('checkout') ?>" class="checkout-btn">Proceed to Checkout</a>
                </div>
            </div>
        </div>
    </div>
</section>
<script type="text/x-magento-init">
{
    "*": {
        "Vendor_Module/js/cart": {}
    }
}
</script>